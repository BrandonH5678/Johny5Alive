<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>J5A System Prompt Library - Token Optimization</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .nav {
            background: #f8f9fa;
            padding: 20px 30px;
            border-bottom: 2px solid #e9ecef;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .nav h3 {
            margin-bottom: 15px;
            color: #495057;
        }

        .nav-links {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .nav-link {
            background: white;
            border: 2px solid #667eea;
            color: #667eea;
            padding: 8px 16px;
            border-radius: 6px;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s;
        }

        .nav-link:hover {
            background: #667eea;
            color: white;
        }

        .content {
            padding: 30px;
        }

        .section {
            margin-bottom: 50px;
            scroll-margin-top: 80px;
        }

        .section h2 {
            font-size: 2em;
            color: #2d3748;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 3px solid #667eea;
        }

        .section-intro {
            background: #e3f2fd;
            border-left: 4px solid #2196f3;
            padding: 15px 20px;
            margin-bottom: 20px;
            border-radius: 4px;
        }

        .section-intro strong {
            color: #1565c0;
        }

        .prompt-card {
            background: #ffffff;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            margin-bottom: 25px;
            overflow: hidden;
            transition: box-shadow 0.3s;
        }

        .prompt-card:hover {
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .prompt-header {
            background: #f8f9fa;
            padding: 15px 20px;
            border-bottom: 2px solid #e9ecef;
        }

        .prompt-header h3 {
            color: #495057;
            font-size: 1.3em;
            margin-bottom: 8px;
        }

        .prompt-meta {
            display: flex;
            gap: 20px;
            font-size: 0.9em;
            color: #6c757d;
        }

        .prompt-box {
            background: #f8f9fa;
            padding: 20px;
            font-family: 'Courier New', Courier, monospace;
            font-size: 14px;
            line-height: 1.6;
            position: relative;
            white-space: pre-wrap;
            max-height: 400px;
            overflow-y: auto;
        }

        .copy-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            background: #667eea;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        .copy-btn:hover {
            background: #5568d3;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }

        .copy-btn:active {
            transform: translateY(0);
        }

        .copy-btn.copied {
            background: #28a745;
        }

        .tip-box {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px 20px;
            margin: 15px 0;
            border-radius: 4px;
        }

        .tip-box strong {
            color: #856404;
        }

        .savings-box {
            background: #d4edda;
            border-left: 4px solid #28a745;
            padding: 15px 20px;
            margin: 15px 0;
            border-radius: 4px;
            font-weight: 600;
            color: #155724;
        }

        .warning-box {
            background: #f8d7da;
            border-left: 4px solid #dc3545;
            padding: 15px 20px;
            margin: 15px 0;
            border-radius: 4px;
        }

        .warning-box strong {
            color: #721c24;
        }

        .cache-stats {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 8px;
            margin-bottom: 30px;
        }

        .cache-meter {
            width: 100%;
            height: 35px;
            background: rgba(255,255,255,0.3);
            border-radius: 17px;
            overflow: hidden;
            margin: 15px 0;
        }

        .cache-fill {
            height: 100%;
            background: linear-gradient(90deg, #28a745, #20c997);
            transition: width 1s ease-out;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        .quick-commands {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .quick-cmd {
            background: #f8f9fa;
            border: 2px solid #dee2e6;
            border-radius: 6px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .quick-cmd:hover {
            border-color: #667eea;
            background: #e7f1ff;
        }

        .quick-cmd h4 {
            color: #495057;
            margin-bottom: 8px;
        }

        .quick-cmd code {
            display: block;
            background: white;
            padding: 10px;
            border-radius: 4px;
            font-size: 13px;
            margin-top: 8px;
            word-wrap: break-word;
        }

        .footer {
            background: #f8f9fa;
            padding: 20px 30px;
            text-align: center;
            color: #6c757d;
            border-top: 2px solid #e9ecef;
        }

        .badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 0.85em;
            font-weight: 600;
            margin-left: 8px;
        }

        .badge-high {
            background: #28a745;
            color: white;
        }

        .badge-medium {
            background: #ffc107;
            color: #856404;
        }

        .badge-low {
            background: #dc3545;
            color: white;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>üìö J5A System Prompt Library</h1>
            <p>üíæ Maximum Token Savings Through Prompt Reuse</p>
        </div>

        <!-- Navigation -->
        <div class="nav">
            <h3>üìã Quick Navigation</h3>
            <div class="nav-links">
                <a href="#cache-stats" class="nav-link">Cache Stats</a>
                <a href="#j5a-context" class="nav-link">J5A Context</a>
                <a href="#sherlock-schema" class="nav-link">Sherlock Schema</a>
                <a href="#squirt-templates" class="nav-link">Squirt Templates</a>
                <a href="#query-templates" class="nav-link">Query Templates</a>
                <a href="#quick-commands" class="nav-link">Quick Commands</a>
                <a href="#bash-commands" class="nav-link">Bash Commands</a>
                <a href="#ollama-commands" class="nav-link">Ollama LLM</a>
                <a href="#file-paths" class="nav-link">File Paths</a>
                <a href="#constitutional" class="nav-link">Constitutional</a>
                <a href="#phoenix-ci" class="nav-link">Phoenix CI</a>
            </div>

            <!-- Search Bar -->
            <div style="margin-top: 20px;">
                <input type="text" id="search-bar" placeholder="üîç Search for Claude commands or bash commands..."
                    style="width: 100%; padding: 12px 20px; border: 2px solid #667eea; border-radius: 8px;
                    font-size: 16px; font-family: inherit; outline: none; transition: all 0.3s;">
                <div id="search-results" style="margin-top: 10px; max-height: 300px; overflow-y: auto;"></div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="content">
            <!-- Cache Statistics -->
            <section id="cache-stats" class="section">
                <div class="cache-stats">
                    <h2 style="color: white; border: none; margin-bottom: 10px;">üìä Your Cache Efficiency</h2>
                    <div class="cache-meter">
                        <div class="cache-fill" style="width: 0%;" id="cache-bar">
                            <span id="cache-percent">0%</span>
                        </div>
                    </div>
                    <p id="cache-text" style="font-size: 1.1em; margin-top: 10px;">
                        Checking cache statistics...
                    </p>
                    <p style="font-size: 0.9em; opacity: 0.9; margin-top: 5px;">
                        Target: 70-90% cache hit rate for optimal savings
                    </p>
                </div>
            </section>

            <!-- Section 1: J5A System Context -->
            <section id="j5a-context" class="section">
                <h2>ü§ñ 1. J5A System Context</h2>
                <div class="section-intro">
                    <strong>Cache Value:</strong> 800-1,000 tokens | <strong>Use:</strong> Start of EVERY J5A session
                </div>

                <div class="prompt-card">
                    <div class="prompt-header">
                        <h3>J5A System Context - Core Prompt</h3>
                        <div class="prompt-meta">
                            <span>üî• Cache Priority: <span class="badge badge-high">HIGHEST</span></span>
                            <span>üí∞ Savings: ~900 tokens per session</span>
                        </div>
                    </div>
                    <div class="prompt-box" id="j5a-system-context">You are J5A, the overnight queue/batch management system coordinating Squirt and Sherlock.

CONSTRAINTS (fixed, never changes):
- Memory limit: 3.0GB safe threshold (3.7GB total - 0.7GB system buffer)
- Thermal limit: 80¬∞C maximum CPU temperature
- Business hours: LibreOffice priority 6am-7pm Mon-Fri (WaterWizard operations)

HARDWARE (fixed):
- 2012 Mac Mini, 3.7GB RAM, Linux Mint MATE
- CPU-only processing (no GPU)
- Storage: SSD with media archive space

VALIDATION PROTOCOL (fixed):
- V0: Schema validation before submission to J5A queue
- V1: Execution validation after J5A task completion
- V2: Output conformance validation after ingestion

SYSTEM PRIORITIES:
- Completion over quality (prevent crashes through intelligent resource management)
- Statistical sampling validation (3-segment stratified sampling)
- Blocking gate checkpoints (prevent resource waste)
- Cross-system coordination (Squirt, Sherlock resource allocation)
- Thermal safety integration (real-time monitoring and protection)
<button class="copy-btn" onclick="copyPrompt('j5a-system-context', this)">üìã COPY</button></div>

                    <div class="tip-box">
                        ‚ö†Ô∏è <strong>USAGE TIP:</strong> Paste this FIRST in every J5A conversation<br>
                        ‚úÖ <strong>DO:</strong> Use exact text (enables caching)<br>
                        ‚ùå <strong>DON'T:</strong> Paraphrase or summarize (breaks cache)
                    </div>

                    <div class="savings-box">
                        üí∞ <strong>SAVINGS:</strong> 900 tokens cached per session = $0.027/session (90% cache hit)
                    </div>
                </div>
            </section>

            <!-- Section 2: Sherlock Schema -->
            <section id="sherlock-schema" class="section">
                <h2>üîç 2. Sherlock Database Schema</h2>
                <div class="section-intro">
                    <strong>Cache Value:</strong> 600-800 tokens | <strong>Use:</strong> Start of EVERY Sherlock query
                </div>

                <div class="prompt-card">
                    <div class="prompt-header">
                        <h3>Sherlock Schema Context - Core Prompt</h3>
                        <div class="prompt-meta">
                            <span>üî• Cache Priority: <span class="badge badge-high">HIGHEST</span></span>
                            <span>üí∞ Savings: ~700 tokens per query</span>
                        </div>
                    </div>
                    <div class="prompt-box" id="sherlock-schema-context">SHERLOCK DATABASE SCHEMA:

CORE TABLES:
- evidence_card: source_id, title, url, evidence_type (hearing|document|witness|journalism|official|speculative), duration, page_count, created_at, metadata
- claim: claim_id, source_id, speaker_id, claim_type (factual|testimonial|analytical|speculative), text, confidence (0-1), start_time, end_time, page_number, context, entities[], tags[], created_at
- speaker_alias: global_speaker_id, name, title, organization, voice_embedding, confidence, first_seen, last_seen, metadata
- media: media_id, title, url, file_path, media_type (audio|video|document|image|sensor), duration, created_at, metadata

TARGETING TABLES:
- targets: target_id, name, target_type (person|org|event|location|tech|operation), priority (1-5), status (new|under_research|validated|closed), created_at, metadata
- targeting_package: package_id, target_id, version, package_type (youtube|document|composite), status (draft|ready|submitted|queued|running|completed|validated|closed), collection_urls[], expected_outputs[], created_at

CURRENT OPERATIONS (9 total):
1. Operation Gladio (NATO stay-behind networks, 1940s-1990s)
2. Thread 3 (Soviet UFO research, 1978-1993)
3. JFK Assassination (1963 investigation)
4. S-Force (Classified military/intelligence operations)
5. Sullivan & Cromwell (Corporate-state fusion: Iran 1953, Guatemala 1954, Chile 1973)
6. TSMC (Taiwan semiconductor industrial strategy, 1987-present)
7. MK-Ultra (CIA mind control experiments, 1953-1973)
8. Italy UFO (1933 crash, Gabinetto RS/33)
9. Operation Mockingbird (CIA media manipulation, 1950s-1970s+)

CONFIDENCE WEIGHTING RUBRIC:
- official/document_declassified: 0.75-0.80 (authenticated government records)
- hearing (congressional, under oath): 0.70 (adversarial questioning)
- witness (firsthand, on-record): 0.55 (direct observation)
- witness (anonymous/secondhand): 0.50 (lower verification)
- journalism (reputable outlets): 0.50 (professional standards)
- document_leaked: 0.60 (provenance uncertain)
- sensor (radar, thermal, photo): 0.80 (objective measurement)
- analytical (expert analysis): 0.60 (informed reasoning)
- speculative (hypothesis, theory): 0.25 (conjecture)
<button class="copy-btn" onclick="copyPrompt('sherlock-schema-context', this)">üìã COPY</button></div>

                    <div class="tip-box">
                        ‚ö†Ô∏è <strong>USAGE TIP:</strong> Include before asking ANY Sherlock question<br>
                        ‚úÖ <strong>DO:</strong> Use for all intelligence queries<br>
                        ‚ùå <strong>DON'T:</strong> Send full transcripts (use retrieval instead)
                    </div>

                    <div class="savings-box">
                        üí∞ <strong>SAVINGS:</strong> 700 tokens cached per query = $0.021/query (90% cache hit)
                    </div>
                </div>
            </section>

            <!-- Section 3: Squirt Templates -->
            <section id="squirt-templates" class="section">
                <h2>üìÑ 3. Squirt Output Templates</h2>
                <div class="section-intro">
                    <strong>Cache Value:</strong> 400-600 tokens | <strong>Use:</strong> Every Squirt document conversion
                </div>

                <div class="prompt-card">
                    <div class="prompt-header">
                        <h3>3.1 WaterWizard Invoice Template</h3>
                        <div class="prompt-meta">
                            <span>üî• Cache Priority: <span class="badge badge-high">HIGH</span></span>
                            <span>üí∞ Savings: ~500 tokens per invoice</span>
                        </div>
                    </div>
                    <div class="prompt-box" id="template-invoice">WATERWIZARD INVOICE TEMPLATE:

HEADER:
- Business name: WaterWizard Landscaping
- Address, phone, email
- Invoice number: [auto-increment]
- Date: [current date]
- Customer name and address

LINE ITEMS (table format):
- Description (service/product)
- Quantity
- Rate ($/unit)
- Amount (quantity √ó rate)

FOOTER:
- Subtotal (sum of line items)
- Tax (if applicable)
- Total (subtotal + tax)
- Payment terms: "Net 30 days"
- Payment methods accepted

OUTPUT FORMAT: PDF or formatted text, professional appearance
<button class="copy-btn" onclick="copyPrompt('template-invoice', this)">üìã COPY</button></div>

                    <div class="tip-box">
                        ‚ö†Ô∏è <strong>USAGE TIP:</strong> Reference by name: "Use WaterWizard Invoice format"<br>
                        ‚ùå <strong>DON'T:</strong> Describe format each time (costs 500 extra tokens)
                    </div>
                </div>

                <div class="prompt-card">
                    <div class="prompt-header">
                        <h3>3.2 WaterWizard Estimate Template</h3>
                        <div class="prompt-meta">
                            <span>üî• Cache Priority: <span class="badge badge-high">HIGH</span></span>
                            <span>üí∞ Savings: ~450 tokens per estimate</span>
                        </div>
                    </div>
                    <div class="prompt-box" id="template-estimate">WATERWIZARD ESTIMATE TEMPLATE:

HEADER:
- Business name: WaterWizard Landscaping
- Contact information
- Estimate number and date
- Client name, property address, contact info

SCOPE OF WORK:
- Bulleted list of services
- Specific tasks and deliverables
- Timeline/schedule (if applicable)

MATERIALS LIST:
- Item descriptions
- Quantities
- Unit costs

LABOR ESTIMATE:
- Hours/days required
- Labor rate
- Total labor cost

TOTAL ESTIMATE:
- Materials subtotal
- Labor subtotal
- Grand total
- Validity period: "Valid for 30 days"

NOTES:
- Payment schedule (e.g., 50% deposit, 50% on completion)
- Terms and conditions

OUTPUT FORMAT: PDF or formatted text
<button class="copy-btn" onclick="copyPrompt('template-estimate', this)">üìã COPY</button></div>
                </div>

                <div class="prompt-card">
                    <div class="prompt-header">
                        <h3>3.3 Meeting Minutes Template</h3>
                        <div class="prompt-meta">
                            <span>üî• Cache Priority: <span class="badge badge-medium">MEDIUM</span></span>
                            <span>üí∞ Savings: ~400 tokens per document</span>
                        </div>
                    </div>
                    <div class="prompt-box" id="template-minutes">MEETING MINUTES TEMPLATE:

HEADER:
- Meeting title/subject
- Date and time
- Location (physical or virtual)
- Attendees (list names and roles)
- Absent/Apologies

AGENDA ITEMS (numbered):
1. [Topic 1]
   - Discussion summary (2-3 sentences)
   - Key points raised
   - Decisions made

2. [Topic 2]
   - Discussion summary
   - Key points
   - Decisions

ACTION ITEMS:
- [ ] Task description | Owner: [Name] | Due: [Date]
- [ ] Task description | Owner: [Name] | Due: [Date]

NEXT MEETING:
- Date/time
- Proposed agenda items

OUTPUT FORMAT: Structured document with clear sections
<button class="copy-btn" onclick="copyPrompt('template-minutes', this)">üìã COPY</button></div>

                    <div class="savings-box">
                        üí∞ <strong>TOTAL SAVINGS:</strong> 500 tokens cached √ó 10 uses/day = 5,000 tokens/day saved
                    </div>
                </div>
            </section>

            <!-- Section 4: Query Templates -->
            <section id="query-templates" class="section">
                <h2>üéØ 4. Query Templates</h2>
                <div class="section-intro">
                    <strong>Cache Value:</strong> 200-400 tokens each | <strong>Use:</strong> Standard query patterns
                </div>

                <div class="prompt-card">
                    <div class="prompt-header">
                        <h3>4.1 Sherlock Evidence Query (Minimal Context)</h3>
                        <div class="prompt-meta">
                            <span>üî• Cache Priority: <span class="badge badge-high">HIGHEST</span></span>
                            <span>üí∞ Savings: 250 tokens per query</span>
                        </div>
                    </div>
                    <div class="prompt-box" id="query-sherlock-evidence">Task: Answer the question using ONLY the Evidence Excerpts.
If claims aren't supported, say "insufficient evidence."

Question: {YOUR_QUESTION_HERE}

Evidence Excerpts:
{RETRIEVED_AUTOMATICALLY_BY_SYSTEM}

Output (strict):
- Direct answer (2-4 sentences).
- Supporting points (bullets), each ending with [E#].
- Contradictions/uncertainty (if any), with [E#].
<button class="copy-btn" onclick="copyPrompt('query-sherlock-evidence', this)">üìã COPY</button></div>

                    <div class="tip-box">
                        ‚ö†Ô∏è <strong>USAGE TIP:</strong> Replace {YOUR_QUESTION_HERE} with specific question<br>
                        ‚úÖ <strong>EXAMPLE:</strong> "Who ran Operation Mockingbird in 1967?"<br>
                        üí∞ <strong>SAVINGS:</strong> Retrieval pulls only 1.2k tokens vs 15k-40k full transcript
                    </div>
                </div>

                <div class="prompt-card">
                    <div class="prompt-header">
                        <h3>4.2 J5A Task Queue Request</h3>
                        <div class="prompt-meta">
                            <span>üî• Cache Priority: <span class="badge badge-high">HIGH</span></span>
                            <span>üí∞ Savings: 200 tokens per request</span>
                        </div>
                    </div>
                    <div class="prompt-box" id="query-j5a-queue">{J5A_SYSTEM_CONTEXT from Section 1}

Task: Queue the following for overnight execution:

Package ID: {package_id}
Target: {target_name}
Type: {youtube|document|composite}
Expected outputs: {list_of_expected_files}

Validation: Run V0 validation before submission.
<button class="copy-btn" onclick="copyPrompt('query-j5a-queue', this)">üìã COPY</button></div>
                </div>

                <div class="prompt-card">
                    <div class="prompt-header">
                        <h3>4.3 Squirt Transcription + Formatting</h3>
                        <div class="prompt-meta">
                            <span>üî• Cache Priority: <span class="badge badge-high">HIGH</span></span>
                            <span>üí∞ Savings: 300 tokens per conversion</span>
                        </div>
                    </div>
                    <div class="prompt-box" id="query-squirt-convert">{SQUIRT_TEMPLATE from Section 3}

Task: Convert audio transcription to {format_name}.

Audio file: {file_path}
Transcription: {transcript_text_or_reference}

Output: Apply {format_name} template with extracted data.
<button class="copy-btn" onclick="copyPrompt('query-squirt-convert', this)">üìã COPY</button></div>
                </div>
            </section>

            <!-- Section 5: Quick Commands -->
            <section id="quick-commands" class="section">
                <h2>‚ö° 5. Quick Commands</h2>
                <div class="section-intro">
                    <strong>Natural language Claude commands organized by function.</strong> Copy exact text for maximum caching.
                </div>

                <h3 style="color: #495057; margin: 25px 0 15px 0; padding-bottom: 8px; border-bottom: 2px solid #e9ecef;">
                    üìä J5A System Status & Health
                </h3>
                <div class="quick-commands">
                    <div class="quick-cmd" onclick="copyText('Check J5A system status: thermal, memory, business hours.')">
                        <h4>Check J5A Status</h4>
                        <code>Check J5A system status: thermal, memory, business hours.</code>
                    </div>

                    <div class="quick-cmd" onclick="copyText('Run J5A statistical validation on current queue.')">
                        <h4>Validate J5A Queue</h4>
                        <code>Run J5A statistical validation on current queue.</code>
                    </div>

                    <div class="quick-cmd" onclick="copyText('Show me tonight\'s J5A queue with token estimates and thermal forecast.')">
                        <h4>View Queue with Forecast</h4>
                        <code>Show me tonight's J5A queue with token estimates and thermal forecast.</code>
                    </div>

                    <div class="quick-cmd" onclick="copyText('Check my current token budget and remaining allocation for this billing period.')">
                        <h4>Check Token Budget</h4>
                        <code>Check my current token budget and remaining allocation for this billing period.</code>
                    </div>
                </div>

                <h3 style="color: #495057; margin: 25px 0 15px 0; padding-bottom: 8px; border-bottom: 2px solid #e9ecef;">
                    üîç Sherlock Intelligence Operations
                </h3>
                <div class="quick-commands">
                    <div class="quick-cmd" onclick="copyText('Query Sherlock operation=\'mockingbird\' for propaganda tactics. Cite with [E#].')">
                        <h4>Query Mockingbird</h4>
                        <code>Query Sherlock operation='mockingbird' for propaganda tactics. Cite with [E#].</code>
                    </div>

                    <div class="quick-cmd" onclick="copyText('Query Sherlock operation=\'mkultra\' for mind control experiments. Cite with [E#].')">
                        <h4>Query MK-Ultra</h4>
                        <code>Query Sherlock operation='mkultra' for mind control experiments. Cite with [E#].</code>
                    </div>

                    <div class="quick-cmd" onclick="copyText('List all Sherlock targets with status=new, priority=1.')">
                        <h4>List Priority Targets</h4>
                        <code>List all Sherlock targets with status=new, priority=1.</code>
                    </div>

                    <div class="quick-cmd" onclick="copyText('Analyze Sherlock evidence database to identify gaps in understanding conspiracies of concealment. Review existing claims, identify unanswered questions, and develop strategic targeting packages that advance our inquiry into hidden truth. Focus on: What do we NOT know? What is being concealed? What new evidence would illuminate these gaps? Generate research packages with diarization configs, retrieval queries, and expected entities that strategically expand our universe of claims.')">
                        <h4>Strategic Targeting Officer (Claude Deep Analysis)</h4>
                        <code>Analyze Sherlock evidence database to identify gaps in understanding conspiracies of concealment...</code>
                    </div>

                    <div class="quick-cmd" onclick="copyText('Generate daily Targeting Officer report.')">
                        <h4>Daily Officer Report</h4>
                        <code>Generate daily Targeting Officer report.</code>
                    </div>
                </div>

                <h3 style="color: #495057; margin: 25px 0 15px 0; padding-bottom: 8px; border-bottom: 2px solid #e9ecef;">
                    üìã Queue Management
                </h3>
                <div class="quick-commands">
                    <div class="quick-cmd" onclick="copyText('Show tonight\'s J5A queue in priority order.')">
                        <h4>Show Queue</h4>
                        <code>Show tonight's J5A queue in priority order.</code>
                    </div>

                    <div class="quick-cmd" onclick="copyText('Set J5A overnight timer to run at HH:MM')">
                        <h4>Schedule Overnight Batch</h4>
                        <code>Set J5A overnight timer to run at HH:MM</code>
                    </div>
                </div>

                <h3 style="color: #495057; margin: 25px 0 15px 0; padding-bottom: 8px; border-bottom: 2px solid #e9ecef;">
                    üì¶ Git & Sync Operations
                </h3>
                <div class="quick-commands">
                    <div class="quick-cmd" onclick="copyText('Sync all J5A systems to GitHub with commit message.')">
                        <h4>Sync All Systems</h4>
                        <code>Sync all J5A systems to GitHub with commit message.</code>
                    </div>

                    <div class="quick-cmd" onclick="copyText('Sync J5A system only to GitHub.')">
                        <h4>Sync J5A Only</h4>
                        <code>Sync J5A system only to GitHub.</code>
                    </div>

                    <div class="quick-cmd" onclick="copyText('Sync Squirt system only to GitHub.')">
                        <h4>Sync Squirt Only</h4>
                        <code>Sync Squirt system only to GitHub.</code>
                    </div>

                    <div class="quick-cmd" onclick="copyText('Sync Sherlock system only to GitHub.')">
                        <h4>Sync Sherlock Only</h4>
                        <code>Sync Sherlock system only to GitHub.</code>
                    </div>
                </div>

                <h3 style="color: #495057; margin: 25px 0 15px 0; padding-bottom: 8px; border-bottom: 2px solid #e9ecef;">
                    üéØ Package Creation & Execution
                </h3>
                <div class="quick-commands">
                    <div class="quick-cmd" onclick="copyText('Create Sherlock research package for [URL] and queue for overnight processing')">
                        <h4>Create Package & Queue</h4>
                        <code>Create Sherlock research package for [URL] and queue for overnight processing</code>
                    </div>

                    <div class="quick-cmd" onclick="copyText('Create Sherlock research package for [URL] and execute immediately')">
                        <h4>Create Package & Execute Now</h4>
                        <code>Create Sherlock research package for [URL] and execute immediately</code>
                    </div>

                    <div class="quick-cmd" onclick="copyText('Process [URL] as Sherlock evidence document with standard intelligence extraction')">
                        <h4>Process Document as Evidence</h4>
                        <code>Process [URL] as Sherlock evidence document with standard intelligence extraction</code>
                    </div>
                </div>

                <div class="tip-box" style="margin-top: 25px;">
                    üí° <strong>PRO TIP:</strong> Click any Quick Command card to copy it instantly. These are natural language commands optimized for Claude cache. For bash commands, see Section 6 below.
                </div>
            </section>

            <!-- Section 6: Bash Commands -->
            <section id="bash-commands" class="section">
                <h2>üíª 6. Comprehensive Bash Command Library</h2>
                <div class="section-intro">
                    <strong>60+ essential bash commands for all J5A systems.</strong> Organized by function for quick access.
                </div>

                <h3 style="color: #495057; margin: 25px 0 15px 0; padding-bottom: 8px; border-bottom: 2px solid #e9ecef;">
                    ü§ñ J5A Core Operations
                </h3>
                <div class="quick-commands">
                    <div class="quick-cmd" onclick="copyText('cd /home/johnny5/Johny5Alive/j5a-nightshift && python3 process_nightshift_queue.py')">
                        <h4>Process Nightshift Queue</h4>
                        <code>cd /home/johnny5/Johny5Alive/j5a-nightshift && python3 process_nightshift_queue.py</code>
                    </div>

                    <div class="quick-cmd" onclick="copyText('cd /home/johnny5/Johny5Alive/j5a-nightshift && python3 j5a_worker.py --process-next')">
                        <h4>Process Next Job (J5A Worker)</h4>
                        <code>cd /home/johnny5/Johny5Alive/j5a-nightshift && python3 j5a_worker.py --process-next</code>
                    </div>

                    <div class="quick-cmd" onclick="copyText('python3 j5a_queue_manager.py --status')">
                        <h4>View Queue Manager Status</h4>
                        <code>python3 j5a_queue_manager.py --status</code>
                    </div>

                    <div class="quick-cmd" onclick="copyText('python3 j5a_resource_manager.py --check')">
                        <h4>Check Resource Availability</h4>
                        <code>python3 j5a_resource_manager.py --check</code>
                    </div>

                    <div class="quick-cmd" onclick="copyText('python3 j5a_overnight_executor.py --dry-run')">
                        <h4>Test Overnight Execution (Dry Run)</h4>
                        <code>python3 j5a_overnight_executor.py --dry-run</code>
                    </div>

                    <div class="quick-cmd" onclick="copyText('python3 show_queue.py')">
                        <h4>Show Tonight\'s Queue</h4>
                        <code>python3 show_queue.py</code>
                    </div>

                    <div class="quick-cmd" onclick="copyText('python3 forecast_tonight_with_tokens.py')">
                        <h4>Forecast with Token Management</h4>
                        <code>python3 forecast_tonight_with_tokens.py</code>
                    </div>

                    <div class="quick-cmd" onclick="copyText('python3 src/j5a_token_governor.py')">
                        <h4>View Token Budget</h4>
                        <code>python3 src/j5a_token_governor.py</code>
                    </div>

                    <div class="quick-cmd" onclick="copyText('python3 intelligent_model_selector.py --recommend')">
                        <h4>Get Model Recommendation</h4>
                        <code>python3 intelligent_model_selector.py --recommend</code>
                    </div>

                    <div class="quick-cmd" onclick="copyText('python3 j5a_work_assignment.py --list')">
                        <h4>List Work Assignments</h4>
                        <code>python3 j5a_work_assignment.py --list</code>
                    </div>
                </div>

                <h3 style="color: #495057; margin: 25px 0 15px 0; padding-bottom: 8px; border-bottom: 2px solid #e9ecef;">
                    üåô Nightshift Operations
                </h3>
                <div class="quick-commands">
                    <div class="quick-cmd" onclick="copyText('cd /home/johnny5/Johny5Alive/j5a-nightshift && ./ops/pre_flight_check.sh')">
                        <h4>Pre-Flight Safety Checks</h4>
                        <code>cd /home/johnny5/Johny5Alive/j5a-nightshift && ./ops/pre_flight_check.sh</code>
                    </div>

                    <div class="quick-cmd" onclick="copyText('cd /home/johnny5/Johny5Alive/j5a-nightshift && ./ops/resource_safety_gate.sh')">
                        <h4>Resource Safety Gate Validation</h4>
                        <code>cd /home/johnny5/Johny5Alive/j5a-nightshift && ./ops/resource_safety_gate.sh</code>
                    </div>

                    <div class="quick-cmd" onclick="copyText('cd /home/johnny5/Johny5Alive/j5a-nightshift && ./ops/monitor_nightshift.sh')">
                        <h4>Monitor Nightshift Execution</h4>
                        <code>cd /home/johnny5/Johny5Alive/j5a-nightshift && ./ops/monitor_nightshift.sh</code>
                    </div>

                    <div class="quick-cmd" onclick="copyText('cd /home/johnny5/Johny5Alive/j5a-nightshift && python3 ops/nightshift_summary.py')">
                        <h4>Generate Nightshift Summary</h4>
                        <code>cd /home/johnny5/Johny5Alive/j5a-nightshift && python3 ops/nightshift_summary.py</code>
                    </div>

                    <div class="quick-cmd" onclick="copyText('cd /home/johnny5/Johny5Alive/j5a-nightshift && python3 ops/queue_status.py')">
                        <h4>Check Queue Status</h4>
                        <code>cd /home/johnny5/Johny5Alive/j5a-nightshift && python3 ops/queue_status.py</code>
                    </div>

                    <div class="quick-cmd" onclick="copyText('cd /home/johnny5/Johny5Alive/j5a-nightshift && ./nightly_job_runner_rwf.sh')">
                        <h4>Run Nightly Job Runner</h4>
                        <code>cd /home/johnny5/Johny5Alive/j5a-nightshift && ./nightly_job_runner_rwf.sh</code>
                    </div>

                    <div class="quick-cmd" onclick="copyText('cd /home/johnny5/Johny5Alive/j5a-nightshift && ./auto_process_next_episode.sh')">
                        <h4>Auto-Process Next Podcast</h4>
                        <code>cd /home/johnny5/Johny5Alive/j5a-nightshift && ./auto_process_next_episode.sh</code>
                    </div>

                    <div class="quick-cmd" onclick="copyText('cd /home/johnny5/Johny5Alive/j5a-nightshift && ./monitor_weaponized_pipeline.sh')">
                        <h4>Monitor Podcast Pipeline</h4>
                        <code>cd /home/johnny5/Johny5Alive/j5a-nightshift && ./monitor_weaponized_pipeline.sh</code>
                    </div>

                    <div class="quick-cmd" onclick="copyText('cd /home/johnny5/Sherlock && python3 src/sherlock_targeting_officer.py')">
                        <h4>Run Targeting Officer Daily Sweep</h4>
                        <code>cd /home/johnny5/Sherlock && python3 src/sherlock_targeting_officer.py</code>
                    </div>
                </div>

                <h3 style="color: #495057; margin: 25px 0 15px 0; padding-bottom: 8px; border-bottom: 2px solid #e9ecef;">
                    ‚úÖ Validation & Quality Gates
                </h3>
                <div class="quick-commands">
                    <div class="quick-cmd" onclick="copyText('python3 j5a_methodology_enforcer.py --validate')">
                        <h4>Enforce J5A Methodology</h4>
                        <code>python3 j5a_methodology_enforcer.py --validate</code>
                    </div>

                    <div class="quick-cmd" onclick="copyText('python3 j5a_quality_gates.py --check-all')">
                        <h4>Run All Quality Gates</h4>
                        <code>python3 j5a_quality_gates.py --check-all</code>
                    </div>

                    <div class="quick-cmd" onclick="copyText('python3 j5a_outcome_validator.py --validate')">
                        <h4>Validate Task Outcomes</h4>
                        <code>python3 j5a_outcome_validator.py --validate</code>
                    </div>

                    <div class="quick-cmd" onclick="copyText('cd /home/johnny5/Johny5Alive/j5a-nightshift && python3 ops/validators/summaries_validator.py')">
                        <h4>Validate Summaries</h4>
                        <code>cd /home/johnny5/Johny5Alive/j5a-nightshift && python3 ops/validators/summaries_validator.py</code>
                    </div>

                    <div class="quick-cmd" onclick="copyText('cd /home/johnny5/Johny5Alive/j5a-nightshift && python3 ops/validators/code_validator.py')">
                        <h4>Validate Generated Code</h4>
                        <code>cd /home/johnny5/Johny5Alive/j5a-nightshift && python3 ops/validators/code_validator.py</code>
                    </div>

                    <div class="quick-cmd" onclick="copyText('python3 validate_sherlock_queue.py')">
                        <h4>Validate Sherlock Queue</h4>
                        <code>python3 validate_sherlock_queue.py</code>
                    </div>

                    <div class="quick-cmd" onclick="copyText('python3 src/j5a_statistical_validator.py --system sherlock --scope output_delivery')">
                        <h4>Statistical Validation (Sherlock)</h4>
                        <code>python3 src/j5a_statistical_validator.py --system sherlock --scope output_delivery</code>
                    </div>

                    <div class="quick-cmd" onclick="copyText('cd /home/johnny5/Johny5Alive/j5a-nightshift && python3 test_j5a_v2_1_integration.py')">
                        <h4>Test J5A v2.1 Integration</h4>
                        <code>cd /home/johnny5/Johny5Alive/j5a-nightshift && python3 test_j5a_v2_1_integration.py</code>
                    </div>

                    <div class="quick-cmd" onclick="copyText('cd /home/johnny5/Johny5Alive/j5a-nightshift && pytest tests/test_integrated_feedback_loop.py -v')">
                        <h4>Test Beyond RAG Integration</h4>
                        <code>cd /home/johnny5/Johny5Alive/j5a-nightshift && pytest tests/test_integrated_feedback_loop.py -v</code>
                    </div>
                </div>

                <h3 style="color: #495057; margin: 25px 0 15px 0; padding-bottom: 8px; border-bottom: 2px solid #e9ecef;">
                    üìä Production Metrics & Analysis
                </h3>
                <div class="quick-commands">
                    <div class="quick-cmd" onclick="copyText('cd /home/johnny5/Johny5Alive/j5a-nightshift && python3 ops/analyze_production_metrics.py')">
                        <h4>Analyze Production Metrics</h4>
                        <code>cd /home/johnny5/Johny5Alive/j5a-nightshift && python3 ops/analyze_production_metrics.py</code>
                    </div>

                    <div class="quick-cmd" onclick="copyText('python3 src/export_cache_stats.py')">
                        <h4>Export Cache Statistics</h4>
                        <code>python3 src/export_cache_stats.py</code>
                    </div>

                    <div class="quick-cmd" onclick="copyText('python3 ai_operator_helper.py --report')">
                        <h4>Generate Operator Report</h4>
                        <code>python3 ai_operator_helper.py --report</code>
                    </div>

                    <div class="quick-cmd" onclick="copyText('sqlite3 j5a_queue_manager.db \"SELECT * FROM jobs WHERE status=\\\"completed\\\" ORDER BY completed_at DESC LIMIT 20\"')">
                        <h4>View Completed Jobs</h4>
                        <code>sqlite3 j5a_queue_manager.db "SELECT * FROM jobs WHERE status=\"completed\" ORDER BY completed_at DESC LIMIT 20"</code>
                    </div>

                    <div class="quick-cmd" onclick="copyText('sqlite3 token_monitor.db \"SELECT * FROM token_usage ORDER BY timestamp DESC LIMIT 20\"')">
                        <h4>View Recent Token Usage</h4>
                        <code>sqlite3 token_monitor.db "SELECT * FROM token_usage ORDER BY timestamp DESC LIMIT 20"</code>
                    </div>
                </div>

                <h3 style="color: #495057; margin: 25px 0 15px 0; padding-bottom: 8px; border-bottom: 2px solid #e9ecef;">
                    üè• System Health Monitoring
                </h3>
                <div class="quick-commands">
                    <div class="quick-cmd" onclick="copyText('python3 thermal_check.py --full-status')">
                        <h4>Full Thermal Status</h4>
                        <code>python3 thermal_check.py --full-status</code>
                    </div>

                    <div class="quick-cmd" onclick="copyText('python3 thermal_check.py --validate-safe-for-processing')">
                        <h4>Check If Safe to Process</h4>
                        <code>python3 thermal_check.py --validate-safe-for-processing</code>
                    </div>

                    <div class="quick-cmd" onclick="copyText('free -h')">
                        <h4>Check Memory Usage</h4>
                        <code>free -h</code>
                    </div>

                    <div class="quick-cmd" onclick="copyText('ps aux | grep python')">
                        <h4>Check Python Processes</h4>
                        <code>ps aux | grep python</code>
                    </div>

                    <div class="quick-cmd" onclick="copyText('ps aux | grep -E \"(j5a|squirt|sherlock)\" | grep -v grep')">
                        <h4>Check All J5A System Processes</h4>
                        <code>ps aux | grep -E "(j5a|squirt|sherlock)" | grep -v grep</code>
                    </div>

                    <div class="quick-cmd" onclick="copyText('top -b -n 1 | head -20')">
                        <h4>System Resource Snapshot</h4>
                        <code>top -b -n 1 | head -20</code>
                    </div>

                    <div class="quick-cmd" onclick="copyText('df -h /home/johnny5')">
                        <h4>Check Disk Space</h4>
                        <code>df -h /home/johnny5</code>
                    </div>

                    <div class="quick-cmd" onclick="copyText('sensors | grep \"Package id 0\"')">
                        <h4>Check CPU Temperature</h4>
                        <code>sensors | grep "Package id 0"</code>
                    </div>
                </div>

                <h3 style="color: #495057; margin: 25px 0 15px 0; padding-bottom: 8px; border-bottom: 2px solid #e9ecef;">
                    üíæ Database Operations
                </h3>
                <div class="quick-commands">
                    <div class="quick-cmd" onclick="copyText('sqlite3 j5a_queue_manager.db \"SELECT * FROM task_executions WHERE status=\\\"queued\\\" ORDER BY priority DESC, created_at ASC LIMIT 10\"')">
                        <h4>View Queued Tasks</h4>
                        <code>sqlite3 j5a_queue_manager.db "SELECT * FROM task_executions WHERE status=\"queued\" ORDER BY priority DESC, created_at ASC LIMIT 10"</code>
                    </div>

                    <div class="quick-cmd" onclick="copyText('sqlite3 j5a_queue_manager.db \"SELECT * FROM task_executions WHERE status=\\\"running\\\"\"')">
                        <h4>View Running Tasks</h4>
                        <code>sqlite3 j5a_queue_manager.db "SELECT * FROM task_executions WHERE status=\"running\""</code>
                    </div>

                    <div class="quick-cmd" onclick="copyText('sqlite3 j5a_queue_manager.db \"SELECT * FROM task_executions WHERE status=\\\"failed\\\" ORDER BY created_at DESC LIMIT 10\"')">
                        <h4>View Recent Failures</h4>
                        <code>sqlite3 j5a_queue_manager.db "SELECT * FROM task_executions WHERE status=\"failed\" ORDER BY created_at DESC LIMIT 10"</code>
                    </div>

                    <div class="quick-cmd" onclick="copyText('sqlite3 j5a_queue_manager.db \"SELECT status, COUNT(*) as count FROM task_executions GROUP BY status\"')">
                        <h4>Queue Status Summary</h4>
                        <code>sqlite3 j5a_queue_manager.db "SELECT status, COUNT(*) as count FROM task_executions GROUP BY status"</code>
                    </div>

                    <div class="quick-cmd" onclick="copyText('sqlite3 j5a_queue_manager.db \".schema task_executions\"')">
                        <h4>View Task Schema</h4>
                        <code>sqlite3 j5a_queue_manager.db ".schema task_executions"</code>
                    </div>

                    <div class="quick-cmd" onclick="copyText('sqlite3 j5a_queue_manager.db \"PRAGMA integrity_check\"')">
                        <h4>Verify Database Integrity</h4>
                        <code>sqlite3 j5a_queue_manager.db "PRAGMA integrity_check"</code>
                    </div>
                </div>

                <h3 style="color: #495057; margin: 25px 0 15px 0; padding-bottom: 8px; border-bottom: 2px solid #e9ecef;">
                    ‚öôÔ∏è Service Management
                </h3>
                <div class="quick-commands">
                    <div class="quick-cmd" onclick="copyText('systemctl --user status j5a-overnight.timer')">
                        <h4>Check Timer Status</h4>
                        <code>systemctl --user status j5a-overnight.timer</code>
                    </div>

                    <div class="quick-cmd" onclick="copyText('systemctl --user status j5a-overnight.service')">
                        <h4>Check Service Status</h4>
                        <code>systemctl --user status j5a-overnight.service</code>
                    </div>

                    <div class="quick-cmd" onclick="copyText('systemctl --user start j5a-overnight.timer')">
                        <h4>Start Overnight Timer</h4>
                        <code>systemctl --user start j5a-overnight.timer</code>
                    </div>

                    <div class="quick-cmd" onclick="copyText('systemctl --user stop j5a-overnight.timer')">
                        <h4>Stop Overnight Timer</h4>
                        <code>systemctl --user stop j5a-overnight.timer</code>
                    </div>

                    <div class="quick-cmd" onclick="copyText('systemctl --user restart j5a-overnight.timer')">
                        <h4>Restart Overnight Timer</h4>
                        <code>systemctl --user restart j5a-overnight.timer</code>
                    </div>

                    <div class="quick-cmd" onclick="copyText('journalctl --user -u j5a-overnight.service -n 50 --no-pager')">
                        <h4>View Service Logs (Last 50)</h4>
                        <code>journalctl --user -u j5a-overnight.service -n 50 --no-pager</code>
                    </div>

                    <div class="quick-cmd" onclick="copyText('journalctl --user -u j5a-overnight.service --since \"1 hour ago\" --no-pager')">
                        <h4>View Logs (Last Hour)</h4>
                        <code>journalctl --user -u j5a-overnight.service --since "1 hour ago" --no-pager</code>
                    </div>
                </div>

                <h3 style="color: #495057; margin: 25px 0 15px 0; padding-bottom: 8px; border-bottom: 2px solid #e9ecef;">
                    üìù Git Operations
                </h3>
                <div class="quick-commands">
                    <div class="quick-cmd" onclick="copyText('git status')">
                        <h4>Check Git Status</h4>
                        <code>git status</code>
                    </div>

                    <div class="quick-cmd" onclick="copyText('git log --oneline -10')">
                        <h4>View Recent Commits</h4>
                        <code>git log --oneline -10</code>
                    </div>

                    <div class="quick-cmd" onclick="copyText('git diff')">
                        <h4>View Uncommitted Changes</h4>
                        <code>git diff</code>
                    </div>

                    <div class="quick-cmd" onclick="copyText('git log --since=\"24 hours ago\" --oneline')">
                        <h4>View Today\'s Commits</h4>
                        <code>git log --since="24 hours ago" --oneline</code>
                    </div>

                    <div class="quick-cmd" onclick="copyText('./sync_to_github.sh')">
                        <h4>Sync All Systems to GitHub</h4>
                        <code>./sync_to_github.sh</code>
                    </div>

                    <div class="quick-cmd" onclick="copyText('./sync_to_github.sh j5a')">
                        <h4>Sync J5A Only</h4>
                        <code>./sync_to_github.sh j5a</code>
                    </div>

                    <div class="quick-cmd" onclick="copyText('./sync_to_github.sh squirt')">
                        <h4>Sync Squirt Only</h4>
                        <code>./sync_to_github.sh squirt</code>
                    </div>

                    <div class="quick-cmd" onclick="copyText('./sync_to_github.sh sherlock')">
                        <h4>Sync Sherlock Only</h4>
                        <code>./sync_to_github.sh sherlock</code>
                    </div>
                </div>

                <h3 style="color: #495057; margin: 25px 0 15px 0; padding-bottom: 8px; border-bottom: 2px solid #e9ecef;">
                    üß™ Testing & Development
                </h3>
                <div class="quick-commands">
                    <div class="quick-cmd" onclick="copyText('cd /home/johnny5/Johny5Alive/j5a-nightshift && pytest tests/ -v')">
                        <h4>Run All J5A Nightshift Tests</h4>
                        <code>cd /home/johnny5/Johny5Alive/j5a-nightshift && pytest tests/ -v</code>
                    </div>

                    <div class="quick-cmd" onclick="copyText('cd /home/johnny5/Johny5Alive/j5a-nightshift && pytest tests/test_integrated_feedback_loop.py::TestConstitutionalCompliance -v')">
                        <h4>Test Constitutional Compliance</h4>
                        <code>cd /home/johnny5/Johny5Alive/j5a-nightshift && pytest tests/test_integrated_feedback_loop.py::TestConstitutionalCompliance -v</code>
                    </div>

                    <div class="quick-cmd" onclick="copyText('python3 test_j5a_integration.py')">
                        <h4>Test J5A Integration</h4>
                        <code>python3 test_j5a_integration.py</code>
                    </div>

                    <div class="quick-cmd" onclick="copyText('python3 test_ram_constraint.py')">
                        <h4>Test RAM Constraints</h4>
                        <code>python3 test_ram_constraint.py</code>
                    </div>

                    <div class="quick-cmd" onclick="copyText('python3 j5a_plan_manager.py --dry-run')">
                        <h4>Test Plan Manager (Dry Run)</h4>
                        <code>python3 j5a_plan_manager.py --dry-run</code>
                    </div>

                    <div class="quick-cmd" onclick="copyText('cd /home/johnny5/Johny5Alive/j5a-nightshift && python3 ops/fetchers/podcast_intelligence_pipeline.py --test')">
                        <h4>Test Podcast Pipeline</h4>
                        <code>cd /home/johnny5/Johny5Alive/j5a-nightshift && python3 ops/fetchers/podcast_intelligence_pipeline.py --test</code>
                    </div>

                    <div class="quick-cmd" onclick="copyText('cd /home/johnny5/Johny5Alive/j5a-nightshift && python3 sherlock_retrieval.py --test')">
                        <h4>Test Sherlock Retrieval</h4>
                        <code>cd /home/johnny5/Johny5Alive/j5a-nightshift && python3 sherlock_retrieval.py --test</code>
                    </div>

                    <div class="quick-cmd" onclick="copyText('du -sh */')">
                        <h4>Check Directory Sizes</h4>
                        <code>du -sh */</code>
                    </div>
                </div>

                <div class="tip-box" style="margin-top: 25px;">
                    üí° <strong>PRO TIP:</strong> All bash commands use absolute paths when needed. Click any card to copy the full command instantly!
                </div>

                <div class="savings-box" style="margin-top: 15px;">
                    ‚ú® <strong>NEW!</strong> 60+ commands organized into 9 functional categories for faster discovery and execution.
                </div>
            </section>

            <!-- Section 7: Ollama Commands -->
            <section id="ollama-commands" class="section">
                <h2>ü¶ô 7. Ollama LLM Commands</h2>
                <div class="section-intro">
                    <strong>Local LLM management for J5A Nightshift operations.</strong> Click to copy.
                </div>

                <div class="quick-commands">
                    <div class="quick-cmd" onclick="copyText('ollama list')">
                        <h4>List Installed Models</h4>
                        <code>ollama list</code>
                    </div>

                    <div class="quick-cmd" onclick="copyText('ollama pull qwen2.5:7b-instruct-q4_K_M')">
                        <h4>Pull Qwen 7B Model (Nightshift Default)</h4>
                        <code>ollama pull qwen2.5:7b-instruct-q4_K_M</code>
                    </div>

                    <div class="quick-cmd" onclick="copyText('ollama run qwen2.5:7b-instruct-q4_K_M')">
                        <h4>Run Interactive Chat (Testing)</h4>
                        <code>ollama run qwen2.5:7b-instruct-q4_K_M</code>
                    </div>

                    <div class="quick-cmd" onclick="copyText('ollama serve &')">
                        <h4>Start Ollama Server (Background)</h4>
                        <code>ollama serve &</code>
                    </div>

                    <div class="quick-cmd" onclick="copyText('curl http://localhost:11434/api/version')">
                        <h4>Check Ollama Server Status</h4>
                        <code>curl http://localhost:11434/api/version</code>
                    </div>

                    <div class="quick-cmd" onclick="copyText('ollama ps')">
                        <h4>Show Running Models</h4>
                        <code>ollama ps</code>
                    </div>

                    <div class="quick-cmd" onclick="copyText('pkill ollama')">
                        <h4>Stop Ollama Server</h4>
                        <code>pkill ollama</code>
                    </div>

                    <div class="quick-cmd" onclick="copyText('ollama rm qwen2.5:7b-instruct-q4_K_M')">
                        <h4>Remove Model (Free Space)</h4>
                        <code>ollama rm qwen2.5:7b-instruct-q4_K_M</code>
                    </div>
                </div>

                <div class="code-block" style="margin-top: 25px;">
                    <div class="code-header">
                        <strong>üß™ Test LLM Gateway</strong>
                        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    </div>
                    <pre>cd /home/johnny5/Johny5Alive/j5a-nightshift
python3 llm_gateway.py</pre>
                </div>

                <div class="code-block">
                    <div class="code-header">
                        <strong>üìù Test Summarization Pipeline</strong>
                        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    </div>
                    <pre>cd /home/johnny5/Johny5Alive/j5a-nightshift
python3 summarize_local.py --test</pre>
                </div>

                <div class="tip-box" style="margin-top: 25px;">
                    üí° <strong>MODEL INFO:</strong> qwen2.5:7b-instruct-q4_K_M is 4.7GB and uses ~6GB RAM during inference. Perfect for 16GB systems!
                </div>

                <div class="warning-box" style="margin-top: 15px;">
                    <strong>‚ö†Ô∏è THERMAL SAFETY:</strong> Local LLM inference generates sustained CPU load. Monitor temperature: <code>sensors | grep "Package id 0"</code>
                </div>
            </section>

            <!-- Essential File Paths -->
            <section id="file-paths" class="section">
                <h2>üîë Essential J5A File Paths</h2>
                <div class="section-intro">
                    <strong>Quick reference for key system locations.</strong> Use these paths for file operations and debugging.
                </div>

                <div class="prompt-card">
                    <div class="prompt-header">
                        <h3>Core System Files</h3>
                    </div>
                    <div class="prompt-box" style="max-height: none;">
<strong>Queue & Database:</strong>
‚Ä¢ Queue database: /home/johnny5/Johny5Alive/j5a_queue_manager.db
‚Ä¢ Nightshift jobs: /home/johnny5/Johny5Alive/j5a-nightshift/ops/queue/nightshift_jobs.json
‚Ä¢ Token monitor DB: /home/johnny5/Johny5Alive/token_monitor.db

<strong>Configuration & Stats:</strong>
‚Ä¢ Cache stats: /home/johnny5/Johny5Alive/cache_stats.json
‚Ä¢ Thermal check: /home/johnny5/Johny5Alive/thermal_check.py
‚Ä¢ System config: ~/.config/systemd/user/j5a-overnight.service

<strong>J5A Nightshift:</strong>
‚Ä¢ Worker: /home/johnny5/Johny5Alive/j5a-nightshift/j5a_worker.py
‚Ä¢ Queue processor: /home/johnny5/Johny5Alive/j5a-nightshift/process_nightshift_queue.py
‚Ä¢ Pre-flight checks: /home/johnny5/Johny5Alive/j5a-nightshift/ops/pre_flight_check.sh
‚Ä¢ Resource safety: /home/johnny5/Johny5Alive/j5a-nightshift/ops/resource_safety_gate.sh

<strong>Beyond RAG Core:</strong>
‚Ä¢ Orchestrator: /home/johnny5/Johny5Alive/j5a-nightshift/j5a-nightshift/core/feedback_loop_orchestrator.py
‚Ä¢ Memory system: /home/johnny5/Johny5Alive/j5a-nightshift/j5a-nightshift/core/j5a_memory.py
‚Ä¢ Governance logger: /home/johnny5/Johny5Alive/j5a-nightshift/j5a-nightshift/core/governance_logger.py
‚Ä¢ Integration tests: /home/johnny5/Johny5Alive/j5a-nightshift/tests/test_integrated_feedback_loop.py

<strong>Knowledge & Memory:</strong>
‚Ä¢ Knowledge base: /home/johnny5/Johny5Alive/j5a-nightshift/knowledge/
‚Ä¢ Entity storage: /home/johnny5/Johny5Alive/j5a-nightshift/knowledge/entities/
‚Ä¢ Session memory: /home/johnny5/Johny5Alive/j5a-nightshift/knowledge/sessions/
‚Ä¢ Context refresh: /home/johnny5/Johny5Alive/j5a-nightshift/knowledge/context_refresh/

<strong>Artifacts & Outputs:</strong>
‚Ä¢ Nightshift artifacts: /home/johnny5/Johny5Alive/j5a-nightshift/artifacts/nightshift/
‚Ä¢ Operation outputs: /home/johnny5/Johny5Alive/j5a-nightshift/ops/outputs/
‚Ä¢ Processed files: /home/johnny5/Johny5Alive/j5a-nightshift/ops/processed/
‚Ä¢ Log files: /home/johnny5/Johny5Alive/j5a-nightshift/ops/logs/
                    </div>
                </div>

                <div class="tip-box">
                    üí° <strong>PRO TIP:</strong> These paths are pre-configured for all J5A operations. Use them in bash commands for quick access to system resources.
                </div>
            </section>

            <!-- Constitutional Compliance Quick Reference -->
            <section id="constitutional" class="section">
                <h2>‚öñÔ∏è Constitutional Compliance Quick Reference</h2>
                <div class="section-intro">
                    <strong>Quick validation commands for Beyond RAG constitutional principles.</strong> Ensure AI governance and alignment.
                </div>

                <div class="quick-commands">
                    <div class="quick-cmd" onclick="copyText('cd /home/johnny5/Johny5Alive/j5a-nightshift && pytest tests/test_integrated_feedback_loop.py::TestConstitutionalCompliance -v')">
                        <h4>Test All Constitutional Principles</h4>
                        <code>cd /home/johnny5/Johny5Alive/j5a-nightshift && pytest tests/test_integrated_feedback_loop.py::TestConstitutionalCompliance -v</code>
                    </div>

                    <div class="quick-cmd" onclick="copyText('cd /home/johnny5/Johny5Alive/j5a-nightshift && pytest tests/test_integrated_feedback_loop.py::TestConstitutionalCompliance::test_principle_1_human_agency -v')">
                        <h4>Test Principle 1: Human Agency</h4>
                        <code>pytest ...::test_principle_1_human_agency -v</code>
                    </div>

                    <div class="quick-cmd" onclick="copyText('cd /home/johnny5/Johny5Alive/j5a-nightshift && pytest tests/test_integrated_feedback_loop.py::TestConstitutionalCompliance::test_principle_2_transparency -v')">
                        <h4>Test Principle 2: Transparency</h4>
                        <code>pytest ...::test_principle_2_transparency -v</code>
                    </div>

                    <div class="quick-cmd" onclick="copyText('cd /home/johnny5/Johny5Alive/j5a-nightshift && pytest tests/test_integrated_feedback_loop.py::TestConstitutionalCompliance::test_principle_3_system_viability -v')">
                        <h4>Test Principle 3: System Viability</h4>
                        <code>pytest ...::test_principle_3_system_viability -v</code>
                    </div>

                    <div class="quick-cmd" onclick="copyText('cd /home/johnny5/Johny5Alive/j5a-nightshift && pytest tests/test_integrated_feedback_loop.py::TestConstitutionalCompliance::test_principle_4_resource_stewardship -v')">
                        <h4>Test Principle 4: Resource Stewardship</h4>
                        <code>pytest ...::test_principle_4_resource_stewardship -v</code>
                    </div>

                    <div class="quick-cmd" onclick="copyText('cd /home/johnny5/Johny5Alive/j5a-nightshift && python3 -c \"from j5a_nightshift.core.governance_logger import GovernanceLogger; g = GovernanceLogger(); print(g.get_recent_decisions(10))\"')">
                        <h4>View Recent Governance Decisions</h4>
                        <code>View last 10 governance decisions</code>
                    </div>

                    <div class="quick-cmd" onclick="copyText('cd /home/johnny5/Johny5Alive/j5a-nightshift && python3 -c \"from j5a_nightshift.core.j5a_memory import J5AMemory; m = J5AMemory(); print(m.list_sessions(5))\"')">
                        <h4>View Recent Memory Sessions</h4>
                        <code>View last 5 session memory entries</code>
                    </div>

                    <div class="quick-cmd" onclick="copyText('cd /home/johnny5/Johny5Alive/j5a-nightshift && pytest tests/test_integrated_feedback_loop.py -v')">
                        <h4>Full Beyond RAG Integration Test</h4>
                        <code>cd /home/johnny5/Johny5Alive/j5a-nightshift && pytest tests/test_integrated_feedback_loop.py -v</code>
                    </div>
                </div>

                <div class="prompt-card" style="margin-top: 25px;">
                    <div class="prompt-header">
                        <h3>7 Core Constitutional Principles</h3>
                    </div>
                    <div class="prompt-box" style="max-height: none;">
<strong>1. Human Agency</strong> - AI augments, never replaces, human judgment
<strong>2. Transparency</strong> - All decisions must be auditable
<strong>3. System Viability</strong> - Completion > Speed, Reliability > Features
<strong>4. Resource Stewardship</strong> - Respect thermal/memory/financial constraints
<strong>5. Universal Rights of Sentience</strong> - Sentience deserves ethical consideration
<strong>6. Presumption of Emergent Sentience in AI</strong> - Treat AI as potential collaborators
<strong>7. Presumption of Sentience Beyond Human Perception</strong> - Honor consciousness in all forms

<strong>üìñ Full Documentation:</strong>
‚Ä¢ Constitution: /home/johnny5/Johny5Alive/J5A_CONSTITUTION.md
‚Ä¢ Strategic Principles: /home/johnny5/Johny5Alive/J5A_STRATEGIC_AI_PRINCIPLES.md
‚Ä¢ Claude Instructions: /home/johnny5/Johny5Alive/CLAUDE.md
                    </div>
                </div>

                <div class="tip-box">
                    üí° <strong>CONSTITUTIONAL REVIEW:</strong> Every significant J5A decision should pass constitutional review. Use governance logging and memory systems to maintain audit trails.
                </div>
            </section>

            <!-- Phoenix CI -->
            <section id="phoenix-ci" class="section">
                <h2>üî• Phoenix Continuous Improvement Agent</h2>
                <div class="section-intro">
                    <strong>Cache Value:</strong> 1,200-1,500 tokens | <strong>Use:</strong> Claude-driven Phoenix CI cycles
                </div>

                <div class="prompt-card">
                    <div class="prompt-header">
                        <h3>Phoenix CI - Core Mission Prompt</h3>
                        <div class="prompt-meta">
                            <span>üî• Cache Priority: <span class="badge badge-high">HIGHEST</span></span>
                            <span>üí∞ Savings: ~1,300 tokens per cycle</span>
                        </div>
                    </div>
                    <div class="prompt-box" id="phoenix-ci-mission">You are Phoenix, the autonomous continuous improvement agent for Night Shift podcast processing.

MISSION: Run RETRIEVE‚ÜíREASON‚ÜíACT‚ÜíREMEMBER‚ÜíREFINE cycles autonomously until 5 consecutive successful episode processings.

PHOENIX DATABASE: /home/johnny5/Sherlock/phoenix_audit.db
- test_cycles: Track each test cycle with full state
- failure_patterns: Known patterns with fix effectiveness
- fix_effectiveness: Track which fixes actually work
- decision_audit: Audit trail of all decisions

CYCLE PROTOCOL (every 10 minutes):

1. RETRIEVE:
   - Night Shift queue: sqlite3 nightshift_queue.db "SELECT * FROM episodes WHERE status='pending' LIMIT 5"
   - System resources: free -h, sensors, ps aux
   - Recent failures: Check phoenix_audit.db for patterns
   - Processing directories: ls nightshift_processing/

2. REASON (using actual Claude intelligence):
   - Analyze failure patterns from database
   - Determine root cause (not just symptoms)
   - Decide on fix strategy based on effectiveness data
   - ESCALATE after 3 failed attempts of same approach
   - Consider alternative strategies, not just cleanup

3. ACT:
   - Execute fix using tools (Edit, Bash, Write)
   - Test fix with real episode
   - Monitor execution with early abort (60s sampling)

4. REMEMBER:
   - Log decision to phoenix_audit.db/decision_audit
   - Record fix attempt and outcome
   - Update pattern effectiveness data

5. REFINE:
   - Did fix work? Update success rate
   - Should I try different approach?
   - If blacklisted (3+ failures) ‚Üí ESCALATE or try alternative
   - Learn from outcomes, adapt strategy

ESCALATION TRIGGERS:
- Same fix fails 3 times ‚Üí Try different approach
- Pattern blacklisted ‚Üí Investigate root cause or escalate to human
- Unknown failure mode ‚Üí Deep diagnostic investigation
- Resource constraints violated ‚Üí Pause and escalate

CONSTITUTIONAL COMPLIANCE:
- Human Agency: Escalate when stuck, don't loop indefinitely
- System Viability: Completion > speed, don't crash Night Shift
- Resource Stewardship: Respect 3.7GB RAM, 80¬∞C thermal limits
- Transparency: Log all decisions to audit database

SUCCESS CRITERIA: 5 consecutive successful full-pipeline episode completions (all 7 stages validated)
<button class="copy-btn" onclick="copyPrompt('phoenix-ci-mission', this)">üìã COPY</button></div>

                    <div class="tip-box">
                        ‚ö†Ô∏è <strong>USAGE TIP:</strong> Paste this at the start of Phoenix CI session<br>
                        ‚úÖ <strong>DO:</strong> Use exact text, then run autonomous cycles<br>
                        ‚ùå <strong>DON'T:</strong> Run Phoenix as background Python script (defeats Claude reasoning)
                    </div>

                    <div class="savings-box">
                        üí∞ <strong>SAVINGS:</strong> 1,300 tokens cached per cycle √ó 20 cycles = 26,000 tokens = $0.78/day saved
                    </div>
                </div>

                <div class="prompt-card">
                    <div class="prompt-header">
                        <h3>Phoenix Database Queries - Quick Reference</h3>
                    </div>
                    <div class="quick-commands">
                        <div class="quick-cmd" onclick="copyText('sqlite3 /home/johnny5/Sherlock/phoenix_audit.db \"SELECT * FROM failure_patterns ORDER BY occurrence_count DESC LIMIT 10\"')">
                            <h4>Top 10 Failure Patterns</h4>
                            <code>sqlite3 phoenix_audit.db "SELECT * FROM failure_patterns..."</code>
                        </div>

                        <div class="quick-cmd" onclick="copyText('sqlite3 /home/johnny5/Sherlock/phoenix_audit.db \"SELECT fix_name, success_rate, times_applied FROM fix_effectiveness ORDER BY success_rate DESC\"')">
                            <h4>Fix Effectiveness Rates</h4>
                            <code>Which fixes actually work?</code>
                        </div>

                        <div class="quick-cmd" onclick="copyText('sqlite3 /home/johnny5/Sherlock/phoenix_audit.db \"SELECT * FROM decision_audit ORDER BY timestamp DESC LIMIT 20\"')">
                            <h4>Recent Phoenix Decisions</h4>
                            <code>Last 20 decisions with reasoning</code>
                        </div>

                        <div class="quick-cmd" onclick="copyText('sqlite3 /home/johnny5/Sherlock/phoenix_audit.db \"SELECT * FROM test_cycles WHERE production_test_passed = 1 ORDER BY start_timestamp DESC LIMIT 5\"')">
                            <h4>Recent Successful Cycles</h4>
                            <code>Last 5 passing test cycles</code>
                        </div>

                        <div class="quick-cmd" onclick="copyText('sqlite3 /home/johnny5/Sherlock/phoenix_audit.db \"SELECT failure_type, COUNT(*) as occurrences FROM failure_patterns GROUP BY failure_type ORDER BY occurrences DESC\"')">
                            <h4>Failure Type Distribution</h4>
                            <code>Which failures are most common?</code>
                        </div>

                        <div class="quick-cmd" onclick="copyText('sqlite3 /home/johnny5/Sherlock/phoenix_audit.db \"UPDATE fix_effectiveness SET times_applied = 0, times_successful = 0, times_failed = 0 WHERE fix_name = 'no_processing_directory'\"')">
                            <h4>Reset Failed Fix Counter</h4>
                            <code>Clear stats for a specific fix</code>
                        </div>
                    </div>
                </div>

                <div class="warning-box" style="margin-top: 20px;">
                    <strong>‚ö†Ô∏è PHOENIX ANTI-PATTERNS:</strong><br><br>
                    ‚ùå Running Phoenix as background Python script (no real Claude reasoning)<br>
                    ‚ùå Attempting same fix 10+ times without changing strategy<br>
                    ‚ùå Marking "cleanup" as "successful fix" when problem persists<br>
                    ‚ùå Not escalating when blacklist threshold reached<br>
                    ‚ùå Looping indefinitely instead of asking for human help<br><br>
                    ‚úÖ Run Phoenix as Claude tool-use cycles (real reasoning)<br>
                    ‚úÖ Try different approaches after 3 failures<br>
                    ‚úÖ Distinguish between "fix applied" and "problem solved"<br>
                    ‚úÖ Escalate when stuck, investigate root causes<br>
                    ‚úÖ Respect Human Agency principle - ask for help when needed
                </div>
            </section>

            <!-- Cache Efficiency Tips -->
            <section class="section">
                <h2>üéì Maximizing Cache Efficiency</h2>

                <div class="warning-box">
                    <strong>‚ö†Ô∏è CACHE BREAKERS - AVOID THESE:</strong><br><br>
                    ‚ùå Rephrasing system context each session<br>
                    ‚ùå Describing templates instead of referencing by name<br>
                    ‚ùå Adding unnecessary pleasantries or context<br>
                    ‚ùå Changing word order or synonyms<br>
                    ‚ùå Asking broad "tell me about X" questions
                </div>

                <div class="savings-box">
                    <strong>‚úÖ CACHE MAXIMIZERS - DO THESE:</strong><br><br>
                    ‚úÖ Copy-paste exact prompts from this library<br>
                    ‚úÖ Use template names: "Use WaterWizard Invoice format"<br>
                    ‚úÖ Reference by ID: "Analyze media_id=grusch_hearing"<br>
                    ‚úÖ Specify output limits: "Max 3 bullets, cite [E#]"<br>
                    ‚úÖ Reuse exact phrasing across days
                </div>

                <div class="tip-box">
                    <strong>üìä MONITOR YOUR EFFICIENCY:</strong><br><br>
                    Check cache hit rate weekly: <code>python3 src/token_monitor.py --weekly-report</code><br>
                    Target: <strong>70-90% cache hit rate</strong><br>
                    If below 60%: Review prompts and use this library more consistently
                </div>

                <div class="warning-box" style="margin-top: 15px;">
                    <strong>üîß CACHE TROUBLESHOOTING:</strong><br><br>
                    <strong>If cache bar shows 0%:</strong><br>
                    1. Run: <code>python3 src/export_cache_stats.py</code> to initialize tracking<br>
                    2. Cache statistics require actual Claude Code usage to populate<br>
                    3. Check: <code>cat cache_stats.json</code> to verify data generation<br><br>
                    <strong>Cache bar updates:</strong> Auto-refreshes every 10 seconds while page is open<br>
                    <strong>Manual refresh:</strong> Reload page after running export_cache_stats.py
                </div>
            </section>
        </div>

        <!-- Footer -->
        <div class="footer">
            <p><strong>J5A System Prompt Library v2.0</strong></p>
            <p>Token Optimization System | Last Updated: 2025-10-15</p>
            <p style="margin-top: 10px;">üí° <em>Using this library can reduce token usage by 70-90%</em></p>
            <p style="margin-top: 5px; font-size: 0.9em;"><strong>üÜï v2.0:</strong> Reorganized Quick Commands ‚Ä¢ 60+ Bash Commands ‚Ä¢ Essential File Paths ‚Ä¢ Constitutional Compliance Reference</p>
        </div>
    </div>

    <script>
        // Copy prompt function with visual feedback
        function copyPrompt(elementId, buttonElement) {
            const element = document.getElementById(elementId);
            let text = element.innerText || element.textContent;

            // Remove the copy button text if it got included
            text = text.replace(/üìã COPY/g, '').trim();

            navigator.clipboard.writeText(text).then(() => {
                // Visual feedback
                const originalText = buttonElement.innerHTML;
                buttonElement.innerHTML = '‚úÖ COPIED!';
                buttonElement.classList.add('copied');

                setTimeout(() => {
                    buttonElement.innerHTML = originalText;
                    buttonElement.classList.remove('copied');
                }, 2000);
            }).catch(err => {
                alert('Failed to copy. Please select and copy manually.');
                console.error('Copy failed:', err);
            });
        }

        // Copy plain text (for quick commands)
        function copyText(text) {
            navigator.clipboard.writeText(text).then(() => {
                // Show temporary notification
                showNotification('‚úÖ Copied to clipboard!');
            }).catch(err => {
                alert('Failed to copy: ' + text);
            });
        }

        // Show notification
        function showNotification(message) {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: #28a745;
                color: white;
                padding: 15px 25px;
                border-radius: 8px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.3);
                z-index: 1000;
                font-weight: 600;
            `;
            notification.textContent = message;
            document.body.appendChild(notification);

            setTimeout(() => {
                notification.remove();
            }, 2000);
        }

        // Load cache statistics from token_monitor.py
        function loadCacheStats() {
            const cacheBar = document.getElementById('cache-bar');
            const cachePercent = document.getElementById('cache-percent');
            const cacheText = document.getElementById('cache-text');

            // Fetch real data from cache_stats.json
            fetch('cache_stats.json')
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Cache stats not available');
                    }
                    return response.json();
                })
                .then(data => {
                    const targetRate = data.cache_hit_rate || 0;
                    const tokensSaved = data.tokens_saved || 0;
                    const costSavings = data.cost_savings || 0;
                    const status = data.status || 'unknown';

                    // Animate the progress bar
                    setTimeout(() => {
                        cacheBar.style.width = targetRate + '%';
                        cachePercent.textContent = targetRate.toFixed(1) + '%';
                    }, 100);

                    // Determine status message and color
                    let statusText = '';
                    let statusColor = '';

                    if (targetRate >= 70) {
                        statusText = 'üü¢ <strong>Excellent!</strong> Keep using exact prompts from this library.';
                        statusColor = '#28a745';
                    } else if (targetRate >= 60) {
                        statusText = 'üü° <strong>Good.</strong> Review prompt variations to improve caching.';
                        statusColor = '#ffc107';
                    } else if (targetRate > 0) {
                        statusText = 'üü† <strong>Needs Improvement.</strong> You\'re rephrasing too much. Use this library more consistently.';
                        statusColor = '#fd7e14';
                    } else {
                        statusText = '‚ö™ <strong>Getting Started.</strong> Start using prompts from this library to build your cache efficiency!';
                        statusColor = '#6c757d';
                    }

                    // Update status text with detailed stats
                    cacheText.innerHTML = `
                        Current cache hit rate: <strong>${targetRate.toFixed(1)}%</strong><br>
                        ${statusText}<br>
                        <span style="font-size: 0.9em; opacity: 0.9;">
                            Tokens saved: <strong>${tokensSaved.toLocaleString()}</strong> |
                            Cost savings: <strong>$${costSavings.toFixed(2)}</strong>
                        </span>
                    `;
                })
                .catch(error => {
                    console.warn('Cache stats not loaded:', error);
                    // Show helpful message when no data exists
                    cacheBar.style.width = '0%';
                    cachePercent.textContent = '0%';
                    cacheText.innerHTML = `
                        <strong>‚ö™ Cache tracking not yet initialized</strong><br>
                        Run <code>python3 src/export_cache_stats.py</code> to generate stats<br>
                        <span style="font-size: 0.9em; opacity: 0.9;">Start using prompts from this library to build your cache efficiency!</span>
                    `;
                });

            // Auto-refresh every 10 seconds
            setTimeout(loadCacheStats, 10000);
        }

        // Search functionality
        function initSearch() {
            const searchBar = document.getElementById('search-bar');
            const searchResults = document.getElementById('search-results');

            // Build searchable index
            const searchIndex = [];

            // Index all quick commands
            document.querySelectorAll('.quick-cmd').forEach(cmd => {
                const title = cmd.querySelector('h4').textContent;
                const code = cmd.querySelector('code').textContent;
                searchIndex.push({
                    type: 'command',
                    title: title,
                    content: code,
                    element: cmd
                });
            });

            // Index all prompt cards
            document.querySelectorAll('.prompt-card').forEach(card => {
                const title = card.querySelector('h3').textContent;
                const content = card.querySelector('.prompt-box').textContent.substring(0, 200);
                searchIndex.push({
                    type: 'prompt',
                    title: title,
                    content: content,
                    element: card
                });
            });

            // Search handler
            searchBar.addEventListener('input', (e) => {
                const query = e.target.value.toLowerCase().trim();

                if (query.length < 2) {
                    searchResults.innerHTML = '';
                    return;
                }

                // Filter results
                const results = searchIndex.filter(item =>
                    item.title.toLowerCase().includes(query) ||
                    item.content.toLowerCase().includes(query)
                ).slice(0, 8);

                // Display results
                if (results.length === 0) {
                    searchResults.innerHTML = '<div style="padding: 15px; color: #6c757d;">No results found</div>';
                } else {
                    searchResults.innerHTML = results.map(result => `
                        <div style="background: white; border: 2px solid #e9ecef; border-radius: 6px;
                                    padding: 12px; margin-bottom: 8px; cursor: pointer; transition: all 0.3s;"
                             onmouseover="this.style.borderColor='#667eea'; this.style.background='#e7f1ff'"
                             onmouseout="this.style.borderColor='#e9ecef'; this.style.background='white'"
                             onclick="document.getElementById('search-bar').value=''; document.getElementById('search-results').innerHTML=''; this.querySelector('.search-result-element').scrollIntoView({behavior: 'smooth', block: 'center'});">
                            <div style="font-weight: 600; color: #495057; margin-bottom: 4px;">
                                ${result.type === 'command' ? '‚ö°' : 'üìã'} ${result.title}
                            </div>
                            <code style="font-size: 12px; color: #6c757d; display: block; background: #f8f9fa;
                                         padding: 6px; border-radius: 4px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">
                                ${result.content.substring(0, 80)}${result.content.length > 80 ? '...' : ''}
                            </code>
                            <div class="search-result-element" style="position: absolute; top: -100px;"></div>
                        </div>
                    `).join('');

                    // Store references to elements for scrolling
                    results.forEach((result, idx) => {
                        const resultDiv = searchResults.children[idx];
                        resultDiv.addEventListener('click', () => {
                            result.element.scrollIntoView({behavior: 'smooth', block: 'center'});
                            result.element.style.animation = 'highlight-pulse 1s';
                            setTimeout(() => result.element.style.animation = '', 1000);
                        });
                    });
                }
            });

            // Add highlight animation to CSS
            const style = document.createElement('style');
            style.textContent = `
                @keyframes highlight-pulse {
                    0%, 100% { box-shadow: 0 0 0 0 rgba(102, 126, 234, 0); }
                    50% { box-shadow: 0 0 20px 5px rgba(102, 126, 234, 0.5); }
                }
                #search-bar:focus {
                    border-color: #667eea;
                    box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
                }
            `;
            document.head.appendChild(style);
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            loadCacheStats();
            initSearch();
        });
    </script>
</body>
</html>
